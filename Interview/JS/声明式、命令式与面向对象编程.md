# 声明式编程、命令式编程与面向对象编程

## 对比声明式与命令式

函数式编程是一个声明式范式，意思是说程序逻辑不需要通过明确描述控制流程来表达。

**命令式** 程序花费大量代码来描述用来达成期望结果的特定步骤 —— **控制流**：即**如何做**。

**声明式** 程序抽象了控制流过程，花费大量代码描述的是**数据流**：即**做什么**。

举个例子，下面是一个用 **命令式** 方式实现的 mapping 过程，接收一个数值数组，并返回一个新的数组，新数组将原数组的每个值乘以 2：

```
const doubleMap = numbers => {
  const doubled = [];
  for (let i = 0; i < numbers.length; i++) {
    doubled.push(numbers[i] * 2);
  }
  return doubled;
};

console.log(doubleMap([2, 3, 4])); // [4, 6, 8]
```

而实现同样功能的 **声明式** mapping 用函数 `Array.prototype.map()` 将控制流抽象了，从而我们可以表达更清晰的数据流：

```
const doubleMap = numbers => numbers.map(n => n * 2);

console.log(doubleMap([2, 3, 4])); // [4, 6, 8]
```

**命令式** 代码中频繁使用语句。**语句**是指一小段代码，它用来完成某个行为。通用的语句例子包括 `for`、`if`、 `switch`、`throw`，等等……

**声明式** 代码更多依赖表达式。**表达式**是指一小段代码，它用来计算某个值。表达式通常是某些函数调用的复合、一些值和操作符，用来计算出结果值。

以下都是表达式：

```
2 * 2
doubleMap([2, 3, 4])
Math.max(4, 3, 2)
```

通常在代码里，你会看到一个表达式被赋给某个变量，或者作为函数返回值，或者作为参数传给一个函数。在被赋值、返回或传递之前，表达式首先被计算，之后它的结果值被使用。

### 声明式编程语言：SQL

有一个地方，你也许已经用到了声明式编程，那就是SQL。

你可以把 SQL 当做一个处理数据的声明式查询语言。完全用SQL写一个应用程序？这不可能。但如果是处理相互关联的数据集，它就显的无比强大了。

像下面这样的查询语句：

```js

SELECT * from dogs
INNER JOIN owners
WHERE dogs.owner_id = owners.id
```

　　如果我们用命令式编程方式实现这段逻辑：

```js
//dogs = [{name: 'Fido', owner_id: 1}, {...}, ... ]
//owners = [{id: 1, name: 'Bob'}, {...}, ...] var dogsWithOwners = []
var dog, owne
for(var di=0; di < dogs.length; di++) {
  dog = dogs[di]
  for(var oi=0; oi < owners.length; oi++) {
    owner = owners[oi]
    if (owner && dog.owner_id == owner.id) {
      dogsWithOwners.push ({
        dog: dog,
        owner: owne
      })
    }
  }}
}
```

　SQL代码不仅很短，不不仅容易读懂，它还有更大的优势。因为我们归纳抽离了how，我们就可以专注于what，让数据库来帮我们优化how。

## 面向对象编程

#### 面向对象

将现实世界的物体抽象成类，每个物体抽象成对象。用继承来维护物体的关系，用封装来描述物体的数据（属性）与行为（方法），通过封装技术，消息机制可以像搭积木的一样快速开发出一个全新的系统。既可以提高编程效率，又增强了代码的可扩展/维护等灵活性，是世界上运用最广泛的编程方法（个人观点：没有之一）。

面向对象语言是命令式编程的一种抽象。抽象包括两方面，数据抽象与过程抽象。在JS中，面向对象编程（也就是我们常说的基于对象，因为JS并不是面向对象的语言）把逻辑与数据封装到函数与原型中，通过函数的原型链拷贝实现继承，而代码的运行逻辑与数据依然封装在函数内，但是做了属性与方法的区分。优秀的面向对象编程显然可以做到声明式编程，也就是根据声明配置生成结果（也就是说，面向对象编程的逻辑是预设的，我们可以根据输入条件，判断走不同的逻辑）。

但是**绝大多数的面向对象编程，不会根据声明配置去生成逻辑，逻辑的调用是封装在对象中，而不是动态生成。所以并没有做到真正的声明式，也就是数据与逻辑完全分离**。这里所说的动态生成逻辑，是根据声明，自动完成逻辑的生成，这样就完全可以不用编写业务代码，而仅仅靠声明来完成逻辑的实现，而这部分处理，交给框架处理即可。

## 语言分类

属于命令式编程的有：汇编、C、面向过程编程、面向对象编程。
属于声明式编程的有：正则表达式、SQL、HTML、CSS、函数式编程。